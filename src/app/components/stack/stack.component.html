<p>{{ stackCards.length }}</p>
  @if (stackCards.length > 0) {
    @let top = stackCards[stackCards.length - 1];
    <div class="card-in-stack p-4 border rounded shadow bg-gray-100">
      <p class="text-lg font-semibold">{{ top.source.name }}</p>

      <!-- Si es una carta de hechizo -->
      @if (top.type == 'Spell') {
      @if (isCart(top.source)) {
        <p class="text-lg font-semibold">{{ top.source.type_line }}</p>
        @if (top.source.type_line.includes('Sorcery') || top.source.type_line.includes('Instant')) {
          <div
            class="text-sm text-gray-700 whitespace-pre-line"
            [innerHTML]="top.source.sanitizedOracleText"
          ></div>
        }
      }
      }
      @if (top.type != 'Spell') {
        <div
          class="text-sm text-gray-700 whitespace-pre-line"
          [innerHTML]="top.description"
        ></div>
        <div
          class="text-sm text-gray-700 whitespace-pre-line"
          [innerHTML]="top.efecto"
        ></div>
      }

    </div>

    <button class="mt-3 btn btn-primary" (click)="moveTopStackCardToBattlefield()">
      Resolver
    </button>
    <button class="mt-3 btn btn-primary" (click)="moveTopStackCardToGraveyard()">
      No Resuelto
    </button>
  } @else {
    <p class="text-gray-500">No hay hechizos en la pila.</p>
  }
